import{s as _}from"./request-1bb69c34.js";import{I as j,u as B,L as E,d as p,J as L,t as I,x as a,y as o,F as N,B as T,C as m,z as s,l as $,D as h,G as l,E as i,M as S,H as V}from"./router-55309c27.js";const A={class:"list-group article-list"},D=["textContent"],F={class:"article-synopsis"},G={class:"tag"},M={key:0,class:"tag"},U={key:1,class:"tag"},q={class:"btn-group float-end"},w=["onClick"],z={class:"list-group-item"},H={__name:"article",setup(J){let v=B(),d=E(),g=d.params.username==v.username,r=p([]),c=p({number:0}),y=p([]);function b(n){_({url:`/api/article/list/${d.params.username}`,method:"get",params:{page:n}}).then(t=>{c.value=t.data,r.value=r.value.concat(t.data.content)})}function k(){_({url:`/api/subject/username/${d.params.username}`,method:"GET"}).then(n=>{y.value=n.data})}function x(n,t){_({url:`/api/article/${n}`,method:"DELETE"}).then(u=>{u.status==200&&r.value.splice(t,1)})}function C(){c.value.number+1<c.value.totalPages&&b(c.value.number+1)}return L(()=>{b(0),k()}),(n,t)=>{const u=I("router-link");return a(),o("ul",A,[(a(!0),o(N,null,T(m(r),(e,f)=>(a(),o("li",{class:"list-group-item",key:f},[$(u,{to:{name:"article_post",params:{id:e.articleId}},class:"article-title"},{default:h(()=>[s("strong",null,[s("p",{textContent:l(e.title)},null,8,D)])]),_:2},1032,["to"]),s("div",F,l(e.synopsis),1),s("span",G,l(e.createTime),1),e.subject!=null?(a(),o("span",M,l(e.subject.subjectName),1)):i("",!0),e.category!=null?(a(),o("span",U,l(e.category.name),1)):i("",!0),s("div",q,[m(g)?(a(),o("button",{key:0,class:"btn btn-outline-danger float-end blog-btn",onClick:P=>x(e.articleId,f)}," 删除 ",8,w)):i("",!0),m(g)?(a(),S(u,{key:1,class:"btn btn-outline-danger float-end blog-btn",target:"_blank",to:{name:"article-editor-md",query:{article:e.articleId}}},{default:h(()=>[V(" 修改 ")]),_:2},1032,["to"])):i("",!0)])]))),128)),s("li",z,[s("a",{onClick:t[0]||(t[0]=e=>C())},"获取")])])}}},O=j(H,[["__scopeId","data-v-c222c0e7"]]);export{O as default};
