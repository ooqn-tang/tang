import{I as D,L as F,u as H,d as n,J as O,t as j,x as l,y as o,z as t,C as e,F as g,B as E,E as u,G as m,H as y,l as L,K as $,M as z,D as R,N as J,O as K}from"./router-7d2f48a2.js";import{s as _}from"./request-90d4e0a2.js";import{_ as U,i as Q}from"./notice-b975fd2b.js";import{d as W,i as X,a as Y}from"./collect-fce7c4cd.js";const p=f=>(J("data-v-f5f6fc62"),f=f(),K(),f),Z={class:"row"},tt={class:"col-md-3 col-lg-3 d-md-inline d-none small-col"},et={key:0,class:"list-group mb-2"},st=p(()=>t("a",{class:"list-group-item active"},"ä¸“é¢˜",-1)),at=["href"],lt={class:"list-group mb-2"},ot=p(()=>t("a",{class:"list-group-item active"},[y("æŽ¨è"),t("span",{class:"float-end"},"ðŸŽ‡")],-1)),nt=["href"],it={class:"col-md-9 col-lg-9 pb-5"},ct={class:"row"},rt={class:"col-lg-8 small-col"},dt={class:"card mb-2 article-body"},ut={key:0,class:"card-body"},mt={class:"time-font"},_t=["innerHTML"],ht={key:1,class:"card-body"},ft={class:"col-md-4 mb-2 small-col"},pt={class:"navbar fixed-bottom navbar-light bg-light foot-navbar"},bt={class:"container-fluid"},vt={class:"col-md-12 col-lg-12 small-col"},gt=p(()=>t("a",{class:"btn btn-outline-primary btn-sm mini-but",disabled:""},"ä¸¾æŠ¥",-1)),yt=["href"],kt=p(()=>t("a",{class:"btn btn-outline-primary btn-sm mini-but",onclick:"document.body.scrollTop = document.documentElement.scrollTop = 0"},"â¬†TOP",-1)),Ct={__name:"article-post",setup(f){const k=F(),C=H();let c=n(1),r=n(k.query.value),T=n(!1),w=n([]),a=n({article:{},author:{}}),I=n(!1),b=n([]),h=n(0),S=n("åŠ è½½ä¸­...");function x(s){c.value==2?_({url:`/api/fans/${s}`,method:"POST"}).then(d=>{c.value=1}):_({url:`/api/fans/${s}`,method:"DELETE"}).then(d=>{c.value=2})}function A(){_({url:`/api/fans/username/${a.value.author.username}`,method:"get"}).then(s=>{s.data==1?c.value=1:c.value=2})}function B(){h.value>=1?W({url:window.location.href}).then(s=>{h.value=0}):X({dataId:r,url:window.location.href,title:a.value.title,synopsis:a.value.synopsis}).then(s=>{h.value=1})}function N(){Y({url:window.location.href}).then(s=>{h.value=s.data})}function G(){_({url:`/api/article/load/${r}`,method:"GET"}).then(s=>{a.value=s.data,I.value=C.username==a.value.author.username,A()})}function M(){_({url:`/api/subject/article/${r}`,method:"GET"}).then(s=>{b=s.data})}function P(){_({url:"/api/article/recommend",method:"GET"}).then(s=>{w.value=s.data})}function V(){r=k.params.id,C.username!=""&&N(),M(),G()}return O(()=>{V(),P()}),(s,d)=>{const q=j("router-link");return l(),o(g,null,[t("div",Z,[t("div",tt,[e(b).length>0?(l(),o("div",et,[st,(l(!0),o(g,null,E(e(b),(i,v)=>(l(),o("a",{class:$(["list-group-item",i.articleId==e(a).articleId?"active2":""]),key:v,href:"/article/"+i.articleId},[t("div",null,m(i.title),1)],10,at))),128))])):u("",!0),t("div",lt,[ot,(l(!0),o(g,null,E(e(w),(i,v)=>(l(),o("a",{class:"list-group-item",key:v,href:"/article/"+i.articleId},m(i.title),9,nt))),128))])]),t("div",it,[t("div",ct,[t("div",rt,[t("div",dt,[e(T)?u("",!0):(l(),o("div",ut,[t("div",null,[t("strong",null,m(e(a).author.nickname),1),y(" . "),t("span",mt,m(e(a).createTime),1),e(c)==2?(l(),o("button",{key:0,class:"btn btn-outline-warning float-end t-b-m-1",onClick:d[0]||(d[0]=i=>x(e(a).author.username))}," è®¢é˜… ")):u("",!0),e(c)==1?(l(),o("button",{key:1,class:"btn btn-outline-warning float-end t-b-m-1",onClick:d[1]||(d[1]=i=>x(e(a).author.username))}," å–æ¶ˆè®¢é˜… ")):u("",!0)]),t("h3",null,[t("strong",null,m(e(a).title),1)]),t("div",{class:"markdown-body",innerHTML:e(a).text},null,8,_t)])),e(T)?(l(),o("div",ht,m(e(S)),1)):u("",!0)])]),t("div",ft,[L(U),L(Q)])])])]),t("nav",pt,[t("div",bt,[t("div",vt,[t("a",{class:$([e(h)==1?"btn-outline-danger":"btn-outline-primary","btn btn-sm mini-but m-l-0"]),onClick:B},"æ”¶è—",2),gt,t("a",{class:"btn btn-outline-primary btn-sm mini-but",href:"https://api.ooqn.com/article/"+e(r),target:"_blank"},"é˜…è¯»æ¨¡å¼",8,yt),e(I)?(l(),z(q,{key:0,class:"btn btn-outline-primary btn-sm mini-but",target:"_blank",to:{name:"article-editor-md",query:{article:e(r)}}},{default:R(()=>[y("ä¿®æ”¹")]),_:1},8,["to"])):u("",!0),kt])])])],64)}}},Et=D(Ct,[["__scopeId","data-v-f5f6fc62"]]);export{Et as default};
