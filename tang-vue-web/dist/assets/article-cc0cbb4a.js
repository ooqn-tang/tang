import{s as _}from"./request-5c6f490a.js";import{I as C,u as j,L as B,e as p,J as E,t as L,x as s,y as o,F as N,B as I,C as m,z as n,l as T,D as b,H as l,E as i,N as $,G as S}from"./router-5601b984.js";const V={class:"list-group article-list"},A={class:"list-group-item"},D=["textContent"],F={class:"article-synopsis"},G={class:"tag"},U={key:0,class:"tag"},q={key:1,class:"tag"},w={class:"btn-group float-end"},z=["onClick"],H={class:"list-group-item"},J={__name:"article",setup(M){let h=j(),d=B(),f=d.params.username==h.username,r=p([]),c=p({number:0}),v=p([]);function g(t){_({url:`/api/article/list/${d.params.username}`,method:"get",params:{page:t}}).then(a=>{c.value=a.data,r.value=r.value.concat(a.data.content)})}function y(){_({url:`/api/subject/username/${d.params.username}`,method:"GET"}).then(t=>{v.value=t.data})}function k(t,a){_({url:`/api/article/${t}`,method:"DELETE"}).then(u=>{u.status==200&&r.value.splice(a,1)})}function x(){c.value.number+1<c.value.totalPages&&g(c.value.number+1)}return E(()=>{g(0),y()}),(t,a)=>{const u=L("router-link");return s(),o("ul",V,[(s(!0),o(N,null,I(m(r),e=>(s(),o("li",A,[T(u,{to:{name:"article_post",params:{id:e.articleId}},class:"article-title"},{default:b(()=>[n("strong",null,[n("p",{textContent:l(e.title)},null,8,D)])]),_:2},1032,["to"]),n("div",F,l(e.synopsis),1),n("span",G,l(e.createTime),1),e.subject!=null?(s(),o("span",U,l(e.subject.subjectName),1)):i("",!0),e.category!=null?(s(),o("span",q,l(e.category.name),1)):i("",!0),n("div",w,[m(f)?(s(),o("button",{key:0,class:"btn btn-outline-danger float-end blog-btn",onClick:P=>k(e.articleId,t.index)}," 删除 ",8,z)):i("",!0),m(f)?(s(),$(u,{key:1,class:"btn btn-outline-danger float-end blog-btn",target:"_blank",to:{name:"article-editor-md",query:{article:e.articleId}}},{default:b(()=>[S(" 修改 ")]),_:2},1032,["to"])):i("",!0)])]))),256)),n("li",H,[n("a",{onClick:a[0]||(a[0]=e=>x())},"获取")])])}}},O=C(J,[["__scopeId","data-v-f51ff0c2"]]);export{O as default};
