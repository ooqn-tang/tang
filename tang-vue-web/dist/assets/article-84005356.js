import{s as _}from"./request-02cf91c6.js";import{G as j,u as B,L as E,d as p,H as L,t as N,x as a,y as o,F as T,B as $,C as m,z as s,l as I,J as f,E as l,D as i,N as S,K as V}from"./router-f99ea542.js";const A={class:"list-group article-list"},D={class:"list-group-item"},F=["textContent"],G={class:"article-synopsis"},U={class:"tag"},q={key:0,class:"tag"},w={key:1,class:"tag"},z={class:"btn-group float-end"},H=["onClick"],J={class:"list-group-item"},K={__name:"article",setup(M){let h=B(),d=E(),g=d.params.username==h.username,r=p([]),c=p({number:0}),v=p([]);function b(n){_({url:`/api/article/list/${d.params.username}`,method:"get",params:{page:n}}).then(t=>{c.value=t.data,r.value=r.value.concat(t.data.content)})}function y(){_({url:`/api/subject/username/${d.params.username}`,method:"GET"}).then(n=>{v.value=n.data})}function k(n,t){_({url:`/api/article/${n}`,method:"DELETE"}).then(u=>{u.status==200&&r.value.splice(t,1)})}function x(){c.value.number+1<c.value.totalPages&&b(c.value.number+1)}return L(()=>{b(0),y()}),(n,t)=>{const u=N("router-link");return a(),o("ul",A,[(a(!0),o(T,null,$(m(r),(e,C)=>(a(),o("li",D,[I(u,{to:{name:"article_post",params:{id:e.articleId}},class:"article-title"},{default:f(()=>[s("strong",null,[s("p",{textContent:l(e.title)},null,8,F)])]),_:2},1032,["to"]),s("div",G,l(e.synopsis),1),s("span",U,l(e.createTime),1),e.subject!=null?(a(),o("span",q,l(e.subject.subjectName),1)):i("",!0),e.category!=null?(a(),o("span",w,l(e.category.name),1)):i("",!0),s("div",z,[m(g)?(a(),o("button",{key:0,class:"btn btn-outline-danger float-end blog-btn",onClick:P=>k(e.articleId,C)}," 删除 ",8,H)):i("",!0),m(g)?(a(),S(u,{key:1,class:"btn btn-outline-danger float-end blog-btn",target:"_blank",to:{name:"article-editor-md",query:{article:e.articleId}}},{default:f(()=>[V(" 修改 ")]),_:2},1032,["to"])):i("",!0)])]))),256)),s("li",J,[s("a",{onClick:t[0]||(t[0]=e=>x())},"获取")])])}}},Q=j(K,[["__scopeId","data-v-73aa9f18"]]);export{Q as default};
