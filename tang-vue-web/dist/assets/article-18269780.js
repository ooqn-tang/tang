import{s as p,f as x}from"./request-596b05ba.js";import{u as j,J as B,a as _,H as L,l as T,q as s,t as o,F as E,y as N,z as i,x as n,j as $,A as g,D as l,B as d,L as A,C as S}from"./preload-helper-bcb988a1.js";const V={class:"list-group article-list"},D={class:"list-group-item"},I=["textContent"],q={class:"article-synopsis"},F={class:"tag"},U={key:0,class:"tag"},w={key:1,class:"tag"},z={class:"btn-group float-end"},G=["onClick"],H={class:"list-group-item"},K={__name:"article",setup(J){let b=j(),m=B(),h=m.params.username==b.author.username,r=_([]),c=_({number:0}),v=_([]);function f(e){p({url:`/api/article/list/${m.params.username}`,method:"get",params:{page:e}}).then(a=>{c.value=a.data,r.value=r.value.concat(a.data.content)})}function k(){p({url:`/api/subject/username/${m.params.username}`,method:"GET"}).then(e=>{v.value=e.data})}function y(e,a){p({url:`/api/article/${e}`,method:"DELETE"}).then(u=>{u.status==200&&r.value.splice(a,1)})}function C(){c.value.number+1<c.value.totalPages&&f(c.value.number+1)}return L(()=>{f(0),k()}),(e,a)=>{const u=T("router-link");return s(),o("ul",V,[(s(!0),o(E,null,N(i(r),t=>(s(),o("li",D,[$(u,{to:{name:"article_post",params:{id:t.articleId}},class:"article-title"},{default:g(()=>[n("strong",null,[n("p",{textContent:l(t.title)},null,8,I)])]),_:2},1032,["to"]),n("div",q,l(t.synopsis),1),n("span",F,l(i(x)(t.createTime)),1),t.subject!=null?(s(),o("span",U,l(t.subject.subjectName),1)):d("",!0),t.category!=null?(s(),o("span",w,l(t.category.name),1)):d("",!0),n("div",z,[i(h)?(s(),o("button",{key:0,class:"btn btn-outline-danger float-end btn-sm",onClick:M=>y(t.articleId,e.index)}," 删除 ",8,G)):d("",!0),i(h)?(s(),A(u,{key:1,class:"btn btn-outline-danger float-end btn-sm",target:"_blank",to:{name:"article-editor-md",query:{article:t.articleId}}},{default:g(()=>[S(" 修改 ")]),_:2},1032,["to"])):d("",!0)])]))),256)),n("li",H,[n("a",{onClick:a[0]||(a[0]=t=>C())},"获取")])])}}};export{K as default};
