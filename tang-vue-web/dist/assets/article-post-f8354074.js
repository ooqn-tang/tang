import{b as j,j as n,J as q,B as l,C as t,E as e,G as g,L as C,F as m,M as _,H as y,v as L,K as w,d as F,D as H,N as A,r as R,o as a,O as z,P as J,I as K}from"./github-349dc5f3.js";import{s as i}from"./request-55ac77c7.js";import{a as U,_ as Q}from"./notice-8039a45b.js";const p=b=>(z("data-v-be0dc757"),b=b(),J(),b),W={class:"row"},X={class:"col-md-3 col-lg-3 d-md-inline d-none"},Y={key:0,class:"list-group mb-2"},Z=p(()=>t("a",{class:"list-group-item active"},"ä¸“é¢˜",-1)),tt=["href"],et={class:"list-group mb-2"},st=p(()=>t("a",{class:"list-group-item active"},[y("æŽ¨è"),t("span",{class:"float-end"},"ðŸŽ‡")],-1)),ot=["href"],at={class:"col-md-9 col-lg-9 pb-5"},lt={class:"row"},nt={class:"col-lg-8"},it={class:"card mb-2 article-body"},ct={key:0,class:"card-body"},rt={style:{color:"rgb(180, 180, 180)"}},dt=["innerHTML"],ut={key:1,class:"card-body"},mt={class:"col-md-4 mb-2"},_t={class:"navbar fixed-bottom navbar-light bg-light",style:{"border-top":"1px solid rgb(206, 206, 206)"}},ht={class:"container-fluid"},bt={class:"col-md-12 col-lg-12"},pt=p(()=>t("a",{class:"btn btn-outline-primary btn-sm mini-but",disabled:""},"ä¸¾æŠ¥",-1)),ft=["href"],vt=p(()=>t("a",{class:"btn btn-outline-primary btn-sm mini-but",onclick:"document.body.scrollTop = document.documentElement.scrollTop = 0"},"â¬†TOP",-1)),gt={__name:"article-post",setup(b){const k=A(),T=K();let d=n(1),c=n(k.query.value),E=n(!1),I=n([]),o=n({article:{},author:{}}),x=n(!1),f=n([]),h=n(0),S=n("åŠ è½½ä¸­...");function $(s){d.value==2?i({url:`/api/fans/${s}`,method:"POST"}).then(u=>{d.value=1}):i({url:`/api/fans/${s}`,method:"DELETE"}).then(u=>{d.value=2})}function P(){i({url:`/api/fans/username/${o.value.author.username}`,method:"get"}).then(s=>{s.data==1?d.value=1:d.value=2})}function B(){h==1?i({url:`/api/collect/${c}`,method:"DELETE"}).then(s=>{h=0}):i({url:"/api/collect",method:"POST",data:{dataId:c,url:window.location.href,title:o.title,synopsis:o.synopsis}}).then(s=>{h=1})}function G(){i({url:`/api/collect/${c}`,method:"GET"}).then(s=>{h=s.data})}function N(){i({url:`/api/article/load/${c}`,method:"GET"}).then(s=>{o.value=s.data,x.value=T.state.username==o.value.author.username,P()})}function D(){i({url:`/api/subject/article/${c}`,method:"GET"}).then(s=>{f=s.data})}function M(){i({url:"/api/article/recommend",method:"GET"}).then(s=>{I.value=s.data})}function O(){c=k.params.id,T.state.username!=""&&G(),D(),N()}return q(()=>{O(),M()}),(s,u)=>{const V=R("router-link");return a(),l(g,null,[t("div",W,[t("div",X,[e(f).length>0?(a(),l("div",Y,[Z,(a(!0),l(g,null,C(e(f),(r,v)=>(a(),l("a",{class:w(["list-group-item",r.articleId==e(o).articleId?"active2":""]),key:v,href:"/article/"+r.articleId},_(r.title),11,tt))),128))])):m("",!0),t("div",et,[st,(a(!0),l(g,null,C(e(I),(r,v)=>(a(),l("a",{class:"list-group-item",key:v,href:"/article/"+r.articleId},_(r.title),9,ot))),128))])]),t("div",at,[t("div",lt,[t("div",nt,[t("div",it,[e(E)?m("",!0):(a(),l("div",ct,[t("div",null,[t("strong",null,_(e(o).author.nickname),1),y(" . "),t("span",rt,_(e(o).createTime),1),e(d)==2?(a(),l("button",{key:0,class:"btn btn-outline-warning float-end t-b-m-1",onClick:u[0]||(u[0]=r=>$(e(o).author.username))}," è®¢é˜… ")):m("",!0),e(d)==1?(a(),l("button",{key:1,class:"btn btn-outline-warning float-end t-b-m-1",onClick:u[1]||(u[1]=r=>$(e(o).author.username))}," å–æ¶ˆè®¢é˜… ")):m("",!0)]),t("h3",null,[t("strong",null,_(e(o).title),1)]),t("div",{class:"markdown-body",innerHTML:e(o).text},null,8,dt)])),e(E)?(a(),l("div",ut,_(e(S)),1)):m("",!0)])]),t("div",mt,[L(U),L(Q)])])])]),t("nav",_t,[t("div",ht,[t("div",bt,[t("a",{class:w([e(h)==1?"btn-outline-danger":"btn-outline-primary","btn btn-sm mini-but"]),style:{"margin-left":"0px"},onClick:B},"æ”¶è—",2),pt,t("a",{class:"btn btn-outline-primary btn-sm mini-but",href:"https://blog.ooqn.com/article/"+e(c),target:"_blank"},"é˜…è¯»æ¨¡å¼",8,ft),e(x)?(a(),F(V,{key:0,class:"btn btn-outline-primary btn-sm mini-but",target:"_blank",to:{name:"article-editor-md",query:{article:e(c)}}},{default:H(()=>[y("ä¿®æ”¹")]),_:1},8,["to"])):m("",!0),vt])])])],64)}}},Et=j(gt,[["__scopeId","data-v-be0dc757"]]);export{Et as default};
