import{u as L,a as d,i as S,q as p,t as c,x as e,F as _,y as f,z as a,I as b,D as m,P as v,g as w,K as D,Q as M,v as T}from"./preload-helper-b3ec2021.js";import"./request-596b05ba.js";const $={class:"row h-100"},N={class:"h-100",style:{display:"flex","flex-direction":"column",height:"100%",padding:"0px"}},R=M('<div class="input-group" style="margin-bottom:1px;"><input type="text" class="form-control" aria-label="Text input with segmented dropdown button"><button type="button" class="btn btn-outline-secondary">搜索</button><button type="button" class="btn btn-outline-secondary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false"><span class="visually-hidden">Toggle Dropdown</span></button><ul class="dropdown-menu dropdown-menu-end"><li><a class="dropdown-item" href="#">增加好友</a></li><li><a class="dropdown-item" href="#">增加群</a></li><li><a class="dropdown-item" href="#">创建群</a></li></ul></div>',1),B={class:"box",style:{height:"100%","flex-grow":"1","overflow-y":"auto",padding:"5px",border:"1px solid #dee2e6",margin:"5px 0px 0px 0px"}},P={class:"box-list",style:{height:"0"}},U=["onClick"],V={style:{color:"#bbbbbb"}},z={class:"btn-group",role:"group","aria-label":"Basic outlined example",style:{margin:"5px 0px 0 0"}},F={class:"h-100",style:{display:"flex","flex-direction":"column",height:"100%",padding:"0px"}},H={class:"card",style:{border:"1px solid rgb(222, 226, 230)"}},j={class:"card-body",style:{padding:"6px 10px","vertical-align":"top",display:"inline-block"}},q={class:"align-middle"},A={class:"box",style:{height:"100%","flex-grow":"1","overflow-y":"auto",padding:"5px",border:"1px solid #dee2e6",margin:"5px 0px"}},E={class:"box-list",style:{height:"0"}},I={style:{color:"rgb(8, 78, 184)","font-weight":"bold"}},K={class:"border rounded p-2"},Q={class:"input-group"},X={__name:"index",setup(G){let y=L(),i=d(new URLSearchParams(window.location.search).get("type"));i.value==null&&(i.value="message");let n=d("left"),l=d(""),r=d([]),g=d({}),u=S("$ms");u.setHeader("Message",s=>{r.value.push(s.data),console.log(s)}),u.setHeader("MessageList",s=>{r.value.push(s.data),console.log(s.data)});function h(s){i.value=s;let t=new URL(window.location.href);t.searchParams.set("type",s),window.history.pushState({},0,t)}function k(){let s={acceptName:g.value.username,sendName:y.author.username,content:l.value,createTime:new Date,updateTime:new Date};r.value.push(s),u.sendMessage(l.value,g.value.username,t=>{t.status==200&&console.log(t.message)}),l.value=""}function C(s){g.value=s,u.messageList(s.username,t=>{t.status==200&&(r.value=t.data)})}let x=d([]);return u.watchList(s=>{s.status==200&&(x.value=s.data)}),(s,t)=>(p(),c("div",$,[e("div",{class:b(["col-md-4 h-100 pb-2",a(n)=="left"?"":"m-h"])},[e("div",N,[R,e("div",B,[e("div",P,[(p(!0),c(_,null,f(a(x),o=>w((p(),c("div",{onClick:J=>{C(o),v(n)?n.value="right":n="right"},class:"border-bottom"},[e("p",null,m(o.nickname),1),e("p",V,m(o.signature)+" ",1)],8,U)),[[T,o.username!=a(y).author.username]])),256))])]),e("div",z,[e("button",{type:"button",class:b(["btn",a(i)=="message"?"btn-primary":"btn-outline-primary"]),onClick:t[0]||(t[0]=o=>h("message"))},"消息",2),e("button",{type:"button",class:b(["btn",a(i)=="contacts"?"btn-primary":"btn-outline-primary"]),onClick:t[1]||(t[1]=o=>h("contacts"))},"通讯录",2),e("button",{type:"button",class:b(["btn",a(i)=="me"?"btn-primary":"btn-outline-primary"]),onClick:t[2]||(t[2]=o=>h("me"))},"我的",2)])])],2),e("div",{class:b(["col-md-8 h-100 pb-2",a(n)=="right"?"":"m-h"])},[e("div",F,[e("div",H,[e("div",j,[e("span",q,m(a(g).nickname),1),e("span",{style:{float:"right"},onClick:t[3]||(t[3]=o=>v(n)?n.value="left":n="left")}," ✖️ ")])]),e("div",A,[e("div",E,[(p(!0),c(_,null,f(a(r),o=>(p(),c("div",null,[e("p",I,m(o.sendName),1),e("p",K,m(o.content)+" ",1)]))),256))])]),e("div",Q,[w(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>v(l)?l.value=o:l=o),type:"text",class:"form-control",placeholder:"Recipient's username","aria-label":"Recipient's username","aria-describedby":"button-addon2"},null,512),[[D,a(l)]]),e("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:t[5]||(t[5]=o=>k())},"发送")])])],2)]))}};export{X as default};
