import{G as g,d as v,Q as b,t as y,x as w,y as x,z as t,K as i,E as S,C as a,k as u,M as p,l as _,J as m,O as I,P as k}from"./router-b176819d.js";import{s as d}from"./request-02cf91c6.js";async function N(o){return d({url:"/api/authenticate",method:"post",data:o})}function V(){return d({url:"/api/author/role/list",method:"get"})}function C(){return d({url:"/api/author",method:"get"})}const c=o=>(I("data-v-17a843ba"),o=o(),k(),o),M={class:"modal",style:{display:"inline"}},R={id:"loginModal",class:"modal-dialog"},A={class:"modal-content"},B=c(()=>t("div",{class:"modal-header"},[t("h4",{class:"modal-title text-center"},"登录")],-1)),D={id:"model-body",class:"modal-body"},J=c(()=>t("label",null,"邮箱/用户名：",-1)),O={class:"form-group"},E=c(()=>t("label",null,"密码：",-1)),T={class:"form-group"},U={class:"modal-footer"},j={class:"btn-group w100"},z={class:"btn-group w100"},G={class:"btn-group w100"},K={__name:"login",setup(o){let s=v({rememberMe:!0}),h=b();async function f(){let r=await N(s.value);if(r.status===200){localStorage.setItem("jwt",r.data);let e=await C(),l=await V();localStorage.setItem("author",JSON.stringify(e.data)),localStorage.setItem("roles",JSON.stringify(l.data)),h.push({path:"/author/"+e.data.username})}}return(r,e)=>{const l=y("router-link");return w(),x("div",M,[t("div",R,[t("div",A,[B,t("div",D,[i(S(a(s).value)+" ",1),J,t("div",O,[u(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>a(s).username=n),placeholder:"邮箱/用户名",autocomplete:"off",class:"form-control"},null,512),[[p,a(s).username]])]),E,t("div",T,[u(t("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=n=>a(s).password=n),placeholder:"密码",autocomplete:"off",class:"form-control"},null,512),[[p,a(s).password]])])]),t("div",U,[t("div",j,[t("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=n=>f())},"登录")]),t("div",z,[_(l,{to:"/register",type:"button",class:"btn btn-outline-secondary"},{default:m(()=>[i("注册")]),_:1})]),t("div",G,[_(l,{to:"/",type:"button",class:"btn btn-outline-secondary"},{default:m(()=>[i("返回首页")]),_:1})])])])])])}}},$=g(K,[["__scopeId","data-v-17a843ba"]]);export{$ as default};
