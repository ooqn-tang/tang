import{b as j,j as n,N as F,C as l,D as t,F as e,I as g,P as C,G as m,H as _,M as y,v as L,O as w,d as H,E as R,L as q,J as A,r as z,o as a,Q as J,R as Q}from"./github-1ff0047c.js";import{s as i}from"./request-55ac77c7.js";import{a as U,_ as K}from"./notice-580ba3c6.js";const b=p=>(J("data-v-16e53d85"),p=p(),Q(),p),W={class:"row"},X={class:"col-md-3 col-lg-3 d-md-inline d-none"},Y={key:0,class:"list-group mb-2"},Z=b(()=>t("a",{class:"list-group-item active"},"专题",-1)),tt=["href"],et={class:"list-group mb-2"},st=b(()=>t("a",{class:"list-group-item active"},[y("推荐"),t("span",{class:"float-end"},"🎇")],-1)),ot=["href"],at={class:"col-md-9 col-lg-9 pb-5"},lt={class:"row"},nt={class:"col-lg-8 move-p-lr-0"},it={class:"card mb-2 article-body move-b-lr-0"},rt={key:0,class:"card-body"},ct={style:{color:"rgb(180, 180, 180)"}},dt=["innerHTML"],ut={key:1,class:"card-body"},mt={class:"col-lg-4 move-p-lr-0"},_t={class:"list-group mb-2 move-b-lr-0"},ht={class:"card move-b-lr-0"},pt={class:"navbar fixed-bottom navbar-light bg-light",style:{"border-top":"1px solid rgb(206, 206, 206)"}},bt={class:"container-fluid"},vt={class:"col-md-12 col-lg-12"},ft=b(()=>t("a",{class:"btn btn-outline-primary btn-sm mini-but",disabled:""},"举报",-1)),gt=["href"],yt=b(()=>t("a",{class:"btn btn-outline-primary btn-sm mini-but",onclick:"document.body.scrollTop = document.documentElement.scrollTop = 0"},"⬆TOP",-1)),kt={__name:"article-post",setup(p){const k=q(),T=A();let d=n(1),r=n(k.query.value),E=n(!1),I=n([]),o=n({article:{},author:{}}),x=n(!1),v=n([]),h=n(0),S=n("加载中...");function $(s){d.value==2?i({url:`/api/fans/${s}`,method:"POST"}).then(u=>{d.value=1}):i({url:`/api/fans/${s}`,method:"DELETE"}).then(u=>{d.value=2})}function P(){i({url:`/api/fans/username/${o.value.author.username}`,method:"get"}).then(s=>{s.data==1?d.value=1:d.value=2})}function G(){h==1?i({url:`/api/collect/${r}`,method:"DELETE"}).then(s=>{h=0}):i({url:"/api/collect",method:"POST",data:{dataId:r,url:window.location.href,title:o.title,synopsis:o.synopsis}}).then(s=>{h=1})}function N(){i({url:`/api/collect/${r}`,method:"GET"}).then(s=>{h=s.data})}function B(){i({url:`/api/article/load/${r}`,method:"GET"}).then(s=>{o.value=s.data,x.value=T.state.username==o.value.author.username,P()})}function D(){i({url:`/api/subject/article/${r}`,method:"GET"}).then(s=>{v=s.data})}function M(){i({url:"/api/article/recommend",method:"GET"}).then(s=>{I.value=s.data})}function O(){r=k.params.id,T.state.username!=""&&N(),D(),B()}return F(()=>{O(),M()}),(s,u)=>{const V=z("router-link");return a(),l(g,null,[t("div",W,[t("div",X,[e(v).length>0?(a(),l("div",Y,[Z,(a(!0),l(g,null,C(e(v),(c,f)=>(a(),l("a",{class:w(["list-group-item",c.articleId==e(o).articleId?"active2":""]),key:f,href:"/article/"+c.articleId},_(c.title),11,tt))),128))])):m("",!0),t("div",et,[st,(a(!0),l(g,null,C(e(I),(c,f)=>(a(),l("a",{class:"list-group-item",key:f,href:"/article/"+c.articleId},_(c.title),9,ot))),128))])]),t("div",at,[t("div",lt,[t("div",nt,[t("div",it,[e(E)?m("",!0):(a(),l("div",rt,[t("div",null,[t("strong",null,_(e(o).author.nickname),1),y(" . "),t("span",ct,_(e(o).createTime),1),e(d)==2?(a(),l("button",{key:0,class:"btn btn-outline-warning float-end t-b-m-1",onClick:u[0]||(u[0]=c=>$(e(o).author.username))}," 订阅 ")):m("",!0),e(d)==1?(a(),l("button",{key:1,class:"btn btn-outline-warning float-end t-b-m-1",onClick:u[1]||(u[1]=c=>$(e(o).author.username))}," 取消订阅 ")):m("",!0)]),t("h3",null,[t("strong",null,_(e(o).title),1)]),t("div",{class:"markdown-body",innerHTML:e(o).text},null,8,dt)])),e(E)?(a(),l("div",ut,_(e(S)),1)):m("",!0)])]),t("div",mt,[t("div",_t,[L(U)]),t("div",ht,[L(K)])])])])]),t("nav",pt,[t("div",bt,[t("div",vt,[t("a",{class:w([e(h)==1?"btn-outline-danger":"btn-outline-primary","btn btn-sm mini-but"]),style:{"margin-left":"0px"},onClick:G},"收藏",2),ft,t("a",{class:"btn btn-outline-primary btn-sm mini-but",href:"https://blog.ooqn.com/article/"+e(r),target:"_blank"},"阅读模式",8,gt),e(x)?(a(),H(V,{key:0,class:"btn btn-outline-primary btn-sm mini-but",target:"_blank",to:{name:"article-editor-md",params:{id:e(r)}}},{default:R(()=>[y("修改")]),_:1},8,["to"])):m("",!0),yt])])])],64)}}},xt=j(kt,[["__scopeId","data-v-16e53d85"]]);export{xt as default};
