import{s as _,f as j}from"./request-596b05ba.js";import{u as B,J as L,a as p,H as T,l as E,q as a,t as o,F as N,y as $,z as u,x as s,j as A,A as g,D as l,B as i,L as S,C as V}from"./preload-helper-2ca1440d.js";const D={class:"list-group article-list"},I={class:"list-group-item"},q=["textContent"],F={class:"article-synopsis"},U={class:"tag"},w={key:0,class:"tag"},z={key:1,class:"tag"},G={class:"btn-group float-end"},H=["onClick"],J={class:"list-group-item"},O={__name:"article",setup(M){let b=B(),d=L(),f=d.params.username==b.author.username,r=p([]),c=p({number:0}),v=p([]);function h(n){_({url:`/api/article/list/${d.params.username}`,method:"get",params:{page:n}}).then(e=>{c.value=e.data,r.value=r.value.concat(e.data.content)})}function k(){_({url:`/api/subject/username/${d.params.username}`,method:"GET"}).then(n=>{v.value=n.data})}function y(n,e){confirm("确认删除？")&&_({url:`/api/article/${n}`,method:"DELETE"}).then(t=>{t.status==200&&r.value.splice(e,1)})}function C(){c.value.number+1<c.value.totalPages&&h(c.value.number+1)}return T(()=>{h(0),k()}),(n,e)=>{const m=E("router-link");return a(),o("ul",D,[(a(!0),o(N,null,$(u(r),(t,x)=>(a(),o("li",I,[A(m,{to:{name:"article_post",params:{id:t.articleId}},class:"article-title"},{default:g(()=>[s("strong",null,[s("p",{textContent:l(t.title)},null,8,q)])]),_:2},1032,["to"]),s("div",F,l(t.synopsis),1),s("span",U,l(u(j)(t.createTime)),1),t.subject!=null?(a(),o("span",w,l(t.subject.subjectName),1)):i("",!0),t.category!=null?(a(),o("span",z,l(t.category.name),1)):i("",!0),s("div",G,[u(f)?(a(),o("button",{key:0,class:"btn btn-outline-danger float-end btn-sm ssm",onClick:P=>y(t.articleId,x)}," 删除 ",8,H)):i("",!0),u(f)?(a(),S(m,{key:1,class:"btn btn-outline-danger float-end btn-sm ssm",target:"_blank",to:{name:"article-editor-md",query:{article:t.articleId}}},{default:g(()=>[V(" 修改 ")]),_:2},1032,["to"])):i("",!0)])]))),256)),s("li",J,[s("a",{onClick:e[0]||(e[0]=t=>C())},"获取")])])}}};export{O as default};
