import{b as j,j as n,N as q,C as l,D as t,F as e,I as g,P as C,G as m,H as _,M as y,v as L,O as w,d as F,E as H,L as R,J as A,r as z,o,Q as J,R as Q}from"./github-e9c6c174.js";import{s as i}from"./request-55ac77c7.js";import{a as U,_ as K}from"./notice-093792c6.js";const b=p=>(J("data-v-3c61e7ac"),p=p(),Q(),p),W={class:"row"},X={class:"col-md-3 col-lg-3 d-md-inline d-none"},Y={key:0,class:"list-group mb-2"},Z=b(()=>t("a",{class:"list-group-item active"},"ä¸“é¢˜",-1)),tt=["href"],et={class:"list-group mb-2"},st=b(()=>t("a",{class:"list-group-item active"},[y("æŽ¨è"),t("span",{class:"float-end"},"ðŸŽ‡")],-1)),at=["href"],ot={class:"col-md-9 col-lg-9 pb-5"},lt={class:"row"},nt={class:"col-lg-8"},it={class:"card mb-2 article-body"},ct={key:0,class:"card-body"},rt={style:{color:"rgb(180, 180, 180)"}},dt=["innerHTML"],ut={key:1,class:"card-body"},mt={class:"col-md-4 mb-2"},_t={class:"navbar fixed-bottom navbar-light bg-light",style:{"border-top":"1px solid rgb(206, 206, 206)"}},ht={class:"container-fluid"},pt={class:"col-md-12 col-lg-12"},bt=b(()=>t("a",{class:"btn btn-outline-primary btn-sm mini-but",disabled:""},"ä¸¾æŠ¥",-1)),ft=["href"],vt=b(()=>t("a",{class:"btn btn-outline-primary btn-sm mini-but",onclick:"document.body.scrollTop = document.documentElement.scrollTop = 0"},"â¬†TOP",-1)),gt={__name:"article-post",setup(p){const k=R(),T=A();let d=n(1),c=n(k.query.value),E=n(!1),I=n([]),a=n({article:{},author:{}}),x=n(!1),f=n([]),h=n(0),S=n("åŠ è½½ä¸­...");function $(s){d.value==2?i({url:`/api/fans/${s}`,method:"POST"}).then(u=>{d.value=1}):i({url:`/api/fans/${s}`,method:"DELETE"}).then(u=>{d.value=2})}function P(){i({url:`/api/fans/username/${a.value.author.username}`,method:"get"}).then(s=>{s.data==1?d.value=1:d.value=2})}function G(){h==1?i({url:`/api/collect/${c}`,method:"DELETE"}).then(s=>{h=0}):i({url:"/api/collect",method:"POST",data:{dataId:c,url:window.location.href,title:a.title,synopsis:a.synopsis}}).then(s=>{h=1})}function N(){i({url:`/api/collect/${c}`,method:"GET"}).then(s=>{h=s.data})}function B(){i({url:`/api/article/load/${c}`,method:"GET"}).then(s=>{a.value=s.data,x.value=T.state.username==a.value.author.username,P()})}function D(){i({url:`/api/subject/article/${c}`,method:"GET"}).then(s=>{f=s.data})}function M(){i({url:"/api/article/recommend",method:"GET"}).then(s=>{I.value=s.data})}function O(){c=k.params.id,T.state.username!=""&&N(),D(),B()}return q(()=>{O(),M()}),(s,u)=>{const V=z("router-link");return o(),l(g,null,[t("div",W,[t("div",X,[e(f).length>0?(o(),l("div",Y,[Z,(o(!0),l(g,null,C(e(f),(r,v)=>(o(),l("a",{class:w(["list-group-item",r.articleId==e(a).articleId?"active2":""]),key:v,href:"/article/"+r.articleId},_(r.title),11,tt))),128))])):m("",!0),t("div",et,[st,(o(!0),l(g,null,C(e(I),(r,v)=>(o(),l("a",{class:"list-group-item",key:v,href:"/article/"+r.articleId},_(r.title),9,at))),128))])]),t("div",ot,[t("div",lt,[t("div",nt,[t("div",it,[e(E)?m("",!0):(o(),l("div",ct,[t("div",null,[t("strong",null,_(e(a).author.nickname),1),y(" . "),t("span",rt,_(e(a).createTime),1),e(d)==2?(o(),l("button",{key:0,class:"btn btn-outline-warning float-end t-b-m-1",onClick:u[0]||(u[0]=r=>$(e(a).author.username))}," è®¢é˜… ")):m("",!0),e(d)==1?(o(),l("button",{key:1,class:"btn btn-outline-warning float-end t-b-m-1",onClick:u[1]||(u[1]=r=>$(e(a).author.username))}," å–æ¶ˆè®¢é˜… ")):m("",!0)]),t("h3",null,[t("strong",null,_(e(a).title),1)]),t("div",{class:"markdown-body",innerHTML:e(a).text},null,8,dt)])),e(E)?(o(),l("div",ut,_(e(S)),1)):m("",!0)])]),t("div",mt,[L(U),L(K)])])])]),t("nav",_t,[t("div",ht,[t("div",pt,[t("a",{class:w([e(h)==1?"btn-outline-danger":"btn-outline-primary","btn btn-sm mini-but"]),style:{"margin-left":"0px"},onClick:G},"æ”¶è—",2),bt,t("a",{class:"btn btn-outline-primary btn-sm mini-but",href:"https://blog.ooqn.com/article/"+e(c),target:"_blank"},"é˜…è¯»æ¨¡å¼",8,ft),e(x)?(o(),F(V,{key:0,class:"btn btn-outline-primary btn-sm mini-but",target:"_blank",to:{name:"article-editor-md",query:{article:e(c)}}},{default:H(()=>[y("ä¿®æ”¹")]),_:1},8,["to"])):m("",!0),vt])])])],64)}}},Et=j(gt,[["__scopeId","data-v-3c61e7ac"]]);export{Et as default};
