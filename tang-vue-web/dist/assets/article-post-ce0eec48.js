import{G as U,J,u as K,a as i,H as Q,e as N,l as W,q as a,t as n,x as t,z as e,D as c,C as m,B as f,g as X,K as Y,F as g,y as x,j as R,I as q,L as B,A as M,M as Z,N as tt,n as et}from"./preload-helper-bcb988a1.js";import{s as p}from"./request-596b05ba.js";import{_ as st,i as ot}from"./info-71739476.js";import{d as at,i as lt,a as nt}from"./collect-78643e43.js";import{a as it}from"./subject-00162416.js";function rt(d){return p({url:"/api/remark",method:"post",data:d})}function ct(d,v){return p({url:`/api/remark/${d}/list`,method:"get",params:{pageNum:v}})}const _=d=>(Z("data-v-579e3402"),d=d(),tt(),d),dt={class:"row"},ut={class:"col-md-9 col-lg-9"},mt={class:"row"},_t={class:"col-lg-12 small-col"},ht={class:"card mb-2 article-body"},pt={key:0,class:"card-body"},bt={id:"title"},ft={class:"time-font"},vt=_(()=>t("hr",null,null,-1)),kt=["innerHTML"],yt={key:1,class:"card-body"},gt={class:"card mb-2"},xt={class:"card-body"},wt=_(()=>t("label",{for:"exampleFormControlTextarea1",class:"form-label"},"è¯„è®º",-1)),Tt={class:"mb-2"},Ct=_(()=>t("button",{class:"btn btn-outline-secondary btn-sm",type:"button"},"è¡¨æƒ…ðŸ™‚",-1)),It={class:"card mb-2"},At={class:"card-body"},Lt={style:{color:"rgb(0, 89, 255)"}},St={class:"col-md-3 col-lg-3 d-md-inline small-col"},Et={key:0,class:"list-group mb-2"},$t=_(()=>t("a",{class:"list-group-item active"},"ä¸“é¢˜",-1)),jt={class:"list-group mb-2"},Nt=_(()=>t("a",{class:"list-group-item active"},[m("æŽ¨è"),t("span",{class:"float-end"},"ðŸŽ‡")],-1)),Rt=["href"],qt={class:"list-group mb-2",style:{position:"sticky",top:"10px"}},Bt=_(()=>t("a",{class:"list-group-item active"},[m("ç›®å½•"),t("span",{class:"float-end"},"ðŸŽ‡")],-1)),Mt=["id","href"],Vt={class:"navbar fixed-bottom navbar-light bg-light foot-navbar p-0"},Dt={class:"container-fluid"},Ft={class:"row"},Pt={class:"col-md-12 col-lg-12 small-col",style:{"padding-top":"3px","padding-bottom":"5px"}},Gt=_(()=>t("a",{class:"btn btn-outline-primary btn-sm btn-sm",disabled:""},"ä¸¾æŠ¥",-1)),Ht=["href"],zt=_(()=>t("a",{class:"btn btn-outline-primary btn-sm btn-sm",onclick:"document.body.scrollTop = document.documentElement.scrollTop = 0"},"â¬†TOP",-1)),Ot={__name:"article-post",setup(d){const v=J(),C=K();let h=i(1),u=i(v.query.value),I=i(!1),A=i([]),l=i({author:{}}),w=i([{remarkId:"1",text:"alksdjfkajsdf"},{remarkId:"1",text:"alksdjfkajsdf"}]),L=i(!1),T=i([]),k=i(0),V=i("åŠ è½½ä¸­..."),S=i([]),y=i({});function E(s){h.value==2?p({url:`/api/fans/${s}`,method:"POST"}).then(r=>{h.value=1}):p({url:`/api/fans/${s}`,method:"DELETE"}).then(r=>{h.value=2})}function D(){y.value.dataId=u,rt(y.value).then(s=>{w.value.unshift(s.data),y.value.text=""})}function $(){ct(u,0).then(s=>{w.value=s.data.content})}function F(){p({url:`/api/fans/username/${l.value.author.username}`,method:"get"}).then(s=>{s.data==1?h.value=1:h.value=2})}function P(){k.value>=1?at({url:window.location.href}).then(s=>{k.value=0}):lt({dataId:u,url:window.location.href,title:l.value.title,synopsis:l.value.synopsis}).then(s=>{k.value=1})}function G(){nt({url:window.location.href}).then(s=>{k.value=s.data})}function H(){p({url:`/api/article/load/${u}`,method:"GET"}).then(s=>{l.value=s.data,L.value=C.author.username==l.value.author.username,F()})}function z(){it(u).then(s=>{T.value=s.data.dataArray})}function O(){p({url:"/api/article/recommend",method:"GET"}).then(s=>{A.value=s.data})}function j(){u=v.params.id,C.username!=""&&G(),z(),H()}return Q(()=>{j(),O(),$()}),N(()=>v.params.id,()=>{j(),$(),document.body.scrollTop=document.documentElement.scrollTop=0}),N(()=>l.value.text,async()=>{await et();let s=document.querySelectorAll(".markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6");debugger;let r=[];for(let b=0;b<s.length;b++){let o=s[b];r.push({id:o.id,text:o.innerText})}S.value=r}),(s,r)=>{const b=W("router-link");return a(),n(g,null,[t("div",dt,[t("div",ut,[t("div",mt,[t("div",_t,[t("div",ht,[e(I)?f("",!0):(a(),n("div",pt,[t("h3",bt,[t("strong",null,c(e(l).title),1)]),t("div",null,[t("strong",null,c(e(l).author.nickname),1),m(" . "),t("span",ft,c(e(l).createTime),1),e(h)==2?(a(),n("button",{key:0,class:"btn btn-outline-warning float-end btn-sm",onClick:r[0]||(r[0]=o=>E(e(l).author.username))}," è®¢é˜… ")):f("",!0),e(h)==1?(a(),n("button",{key:1,class:"btn btn-outline-warning float-end btn-sm",onClick:r[1]||(r[1]=o=>E(e(l).author.username))}," å–æ¶ˆè®¢é˜… ")):f("",!0),vt]),t("div",{class:"markdown-body",innerHTML:e(l).text},null,8,kt)])),e(I)?(a(),n("div",yt,c(e(V)),1)):f("",!0)]),t("div",gt,[t("div",xt,[wt,t("div",Tt,[X(t("textarea",{class:"form-control",rows:"3",placeholder:"è¾“å…¥çš„å†…å®¹ä¸åŒ…å«æ ‡ç­¾çš„å†…å®¹ä¼šåœ¨æœ€åŽè¿½åŠ æ ‡ç­¾ä¸­çš„å†…å®¹ã€‚","onUpdate:modelValue":r[2]||(r[2]=o=>e(y).text=o)},null,512),[[Y,e(y).text]])]),Ct,t("button",{class:"btn btn-outline-secondary btn-sm float-end",type:"button",onClick:D},"å‘é€")])]),(a(!0),n(g,null,x(e(w),o=>(a(),n("div",It,[t("div",At,[t("p",Lt,c(o.author!=null?o.author.nickname:"æœªçŸ¥"),1),t("p",null,c(o.text),1)])]))),256))])])]),t("div",St,[e(T).length>0?(a(),n("div",Et,[$t,(a(!0),n(g,null,x(e(T),o=>(a(),B(b,{class:q(["list-group-item",o.articleId==e(l).articleId?"active2":""]),to:"/article/"+o.articleId},{default:M(()=>[t("div",null,c(o.title),1)]),_:2},1032,["class","to"]))),256))])):f("",!0),t("div",jt,[Nt,(a(!0),n(g,null,x(e(A),o=>(a(),n("a",{class:"list-group-item",href:"/article/"+o.articleId},c(o.title),9,Rt))),256))]),R(st),R(ot),t("div",qt,[Bt,(a(!0),n(g,null,x(e(S),o=>(a(),n("a",{class:"list-group-item",id:o.id,href:"#"+o.id},c(o.text),9,Mt))),256))])])]),t("nav",Vt,[t("div",Dt,[t("div",Ft,[t("div",Pt,[t("a",{class:q([e(k)==1?"btn-outline-danger":"btn-outline-primary","btn btn-sm btn-sm m-l-0"]),onClick:P},"æ”¶è—",2),m("Â  "),Gt,m("Â  "),t("a",{class:"btn btn-outline-primary btn-sm btn-sm",href:"https://www.ooqn.com/article/"+e(u),target:"_blank"},"é˜…è¯»æ¨¡å¼",8,Ht),m("Â  "),e(L)?(a(),B(b,{key:0,class:"btn btn-outline-primary btn-sm btn-sm",target:"_blank",to:{name:"article-editor-md",query:{article:e(u)}}},{default:M(()=>[m("ä¿®æ”¹")]),_:1},8,["to"])):f("",!0),m("Â  "),zt])])])])],64)}}},Xt=U(Ot,[["__scopeId","data-v-579e3402"]]);export{Xt as default};
