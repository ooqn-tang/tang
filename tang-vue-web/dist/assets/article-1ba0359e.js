import{s as d}from"./request-55ac77c7.js";import{I as j,r as p,J as B,x as l,F as E,L,B as m,y as a,H as N,O as I,E as s,n as T,z as v,M as o,C as i,N as $,G as V,D}from"./github-1130d390.js";const S={class:"list-group article-list"},A=["textContent"],F={class:"article-synopsis"},G={class:"tag"},M={key:0,class:"tag"},U={key:1,class:"tag"},q={class:"btn-group float-end"},w=["onClick"],z={class:"list-group-item"},H={__name:"article",setup(J){let h=N(),_=I(),g=_.params.username==h.state.username,r=p([]),c=p({number:0}),y=p([]);function b(n){d({url:`/api/article/list/${_.params.username}`,method:"get",params:{page:n}}).then(t=>{c.value=t.data,r.value=r.value.concat(t.data.content)})}function k(){d({url:`/api/subject/username/${_.params.username}`,method:"GET"}).then(n=>{y.value=n.data})}function x(n,t){d({url:`/api/article/${n}`,method:"DELETE"}).then(u=>{u.status==200&&r.value.splice(t,1)})}function C(){c.value.number+1<c.value.totalPages&&b(c.value.number+1)}return B(()=>{b(0),k()}),(n,t)=>{const u=D("router-link");return s(),l("ul",S,[(s(!0),l(E,null,L(m(r),(e,f)=>(s(),l("li",{class:"list-group-item",key:f},[T(u,{to:{name:"article_post",params:{id:e.articleId}},class:"article-title"},{default:v(()=>[a("strong",null,[a("p",{textContent:o(e.title)},null,8,A)])]),_:2},1032,["to"]),a("div",F,o(e.synopsis),1),a("span",G,o(e.createTime),1),e.subject!=null?(s(),l("span",M,o(e.subject.subjectName),1)):i("",!0),e.category!=null?(s(),l("span",U,o(e.category.name),1)):i("",!0),a("div",q,[m(g)?(s(),l("button",{key:0,class:"btn btn-outline-danger float-end blog-btn",onClick:O=>x(e.articleId,f)}," 删除 ",8,w)):i("",!0),m(g)?(s(),$(u,{key:1,class:"btn btn-outline-danger float-end blog-btn",target:"_blank",to:{name:"article-editor-md",query:{article:e.articleId}}},{default:v(()=>[V(" 修改 ")]),_:2},1032,["to"])):i("",!0)])]))),128)),a("li",z,[a("a",{onClick:t[0]||(t[0]=e=>C())},"获取")])])}}},K=j(H,[["__scopeId","data-v-a35360a9"]]);export{K as default};
