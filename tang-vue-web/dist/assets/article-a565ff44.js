import{s as h}from"./request-596b05ba.js";import{N as A,a as p}from"./FormItem-1ba0c10d.js";import{N as C,a as f,b as y}from"./Space-96c22882.js";import{a as i,H as z,q as E,t as T,j as l,A as r,z as e,F as g,C as F,h as u}from"./preload-helper-2ca1440d.js";import{G as s}from"./Dropdown-f5e18745.js";import"./admin-f8ef0cd9.js";function V(d){return h({url:`/api/admin/article/${d}`,method:"DELETE"})}function x(){return h({url:"/api/admin/article",method:"GET"})}const L={__name:"article",setup(d){let o=i([]),m=i({}),n=i({}),k=i({phone:{required:!0,message:"请输入姓名",trigger:"blur"}}),_=[{title:"标题",key:"title"},{title:"时间",key:"createTime"},{title:"作者",key:"author.nickname"},{title:"操作",key:"actions",width:"250",render(t,a){return[u(f,[u(s,{size:"small",onClick:()=>sendMail(t)},{default:()=>"查看"}),u(s,{size:"small",onClick:()=>N(a,t)},{default:()=>"删除"})])]}}],N=(t,a)=>{V(a.articleId).then(c=>{o.value.splice(t,1)})},v=()=>{x().then(t=>{o.value=t.data.content})};z(()=>{v()});let b=()=>{m.value.validate()};return(t,a)=>(E(),T(g,null,[l(e(f),{vertical:""},{default:r(()=>[l(e(A),{ref_key:"formRef",ref:m,inline:"","label-width":80,model:e(n),rules:e(k),size:t.size},{default:r(()=>[l(e(p),{label:"电话号码",path:"phone"},{default:r(()=>[l(e(C),{value:e(n).phone,"onUpdate:value":a[0]||(a[0]=c=>e(n).phone=c),placeholder:"电话号码"},null,8,["value"])]),_:1}),l(e(p),null,{default:r(()=>[l(e(s),{"attr-type":"button",onClick:e(b)},{default:r(()=>[F(" 验证 ")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules","size"])]),_:1}),l(e(y),{columns:e(_),data:e(o),bordered:!0},null,8,["columns","data"])],64))}};export{L as default};
