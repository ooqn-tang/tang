import{s as m}from"./request-5c6f490a.js";import{u as x,L as j,e as _,J as B,t as E,x as s,y as o,F as L,B as N,C as u,z as n,l as T,D as f,H as l,E as d,N as $,G as S}from"./router-ec2cfcb0.js";import{f as V}from"./common-bf6602b3.js";const A={class:"list-group article-list"},D={class:"list-group-item"},I=["textContent"],F={class:"article-synopsis"},G={class:"tag"},U={key:0,class:"tag"},q={key:1,class:"tag"},w={class:"btn-group float-end"},z=["onClick"],H={class:"list-group-item"},O={__name:"article",setup(J){let h=x(),p=j(),g=p.params.username==h.username,r=_([]),c=_({number:0}),v=_([]);function b(t){m({url:`/api/article/list/${p.params.username}`,method:"get",params:{page:t}}).then(a=>{c.value=a.data,r.value=r.value.concat(a.data.content)})}function k(){m({url:`/api/subject/username/${p.params.username}`,method:"GET"}).then(t=>{v.value=t.data})}function y(t,a){m({url:`/api/article/${t}`,method:"DELETE"}).then(i=>{i.status==200&&r.value.splice(a,1)})}function C(){c.value.number+1<c.value.totalPages&&b(c.value.number+1)}return B(()=>{b(0),k()}),(t,a)=>{const i=E("router-link");return s(),o("ul",A,[(s(!0),o(L,null,N(u(r),e=>(s(),o("li",D,[T(i,{to:{name:"article_post",params:{id:e.articleId}},class:"article-title"},{default:f(()=>[n("strong",null,[n("p",{textContent:l(e.title)},null,8,I)])]),_:2},1032,["to"]),n("div",F,l(e.synopsis),1),n("span",G,l(u(V)(e.createTime)),1),e.subject!=null?(s(),o("span",U,l(e.subject.subjectName),1)):d("",!0),e.category!=null?(s(),o("span",q,l(e.category.name),1)):d("",!0),n("div",w,[u(g)?(s(),o("button",{key:0,class:"btn btn-outline-danger float-end blog-btn",onClick:M=>y(e.articleId,t.index)}," 删除 ",8,z)):d("",!0),u(g)?(s(),$(i,{key:1,class:"btn btn-outline-danger float-end blog-btn",target:"_blank",to:{name:"article-editor-md",query:{article:e.articleId}}},{default:f(()=>[S(" 修改 ")]),_:2},1032,["to"])):d("",!0)])]))),256)),n("li",H,[n("a",{onClick:a[0]||(a[0]=e=>C())},"获取")])])}}};export{O as default};
