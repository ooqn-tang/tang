import{s as _,f as x}from"./request-651d32a9.js";import{u as j,J as B,a as m,H as L,q as T,s,t as o,F as E,y as N,z as i,x as n,j as $,A as h,D as l,B as d,L as A,C as S}from"./preload-helper-3003bc42.js";const V={class:"list-group article-list"},D={class:"list-group-item"},I=["textContent"],q={class:"article-synopsis"},F={class:"tag"},U={key:0,class:"tag"},w={key:1,class:"tag"},z={class:"btn-group float-end"},G=["onClick"],H={class:"list-group-item"},K={__name:"article",setup(J){let f=j(),p=B(),g=p.params.username==f.author.username,r=m([]),c=m({number:0}),v=m([]);function b(e){_({url:`/api/article/list/${p.params.username}`,method:"get",params:{page:e}}).then(a=>{c.value=a.data,r.value=r.value.concat(a.data.content)})}function k(){_({url:`/api/subject/username/${p.params.username}`,method:"GET"}).then(e=>{v.value=e.data})}function y(e,a){_({url:`/api/article/${e}`,method:"DELETE"}).then(u=>{u.status==200&&r.value.splice(a,1)})}function C(){c.value.number+1<c.value.totalPages&&b(c.value.number+1)}return L(()=>{b(0),k()}),(e,a)=>{const u=T("router-link");return s(),o("ul",V,[(s(!0),o(E,null,N(i(r),t=>(s(),o("li",D,[$(u,{to:{name:"article_post",params:{id:t.articleId}},class:"article-title"},{default:h(()=>[n("strong",null,[n("p",{textContent:l(t.title)},null,8,I)])]),_:2},1032,["to"]),n("div",q,l(t.synopsis),1),n("span",F,l(i(x)(t.createTime)),1),t.subject!=null?(s(),o("span",U,l(t.subject.subjectName),1)):d("",!0),t.category!=null?(s(),o("span",w,l(t.category.name),1)):d("",!0),n("div",z,[i(g)?(s(),o("button",{key:0,class:"btn btn-outline-danger float-end blog-btn",onClick:M=>y(t.articleId,e.index)}," 删除 ",8,G)):d("",!0),i(g)?(s(),A(u,{key:1,class:"btn btn-outline-danger float-end blog-btn",target:"_blank",to:{name:"article-editor-md",query:{article:t.articleId}}},{default:h(()=>[S(" 修改 ")]),_:2},1032,["to"])):d("",!0)])]))),256)),n("li",H,[n("a",{onClick:a[0]||(a[0]=t=>C())},"获取")])])}}};export{K as default};
