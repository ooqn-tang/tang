import{I as g,e as v,Q as b,t as y,x as w,y as x,z as t,G as i,H as S,C as a,k as u,M as p,l as _,D as m,O as I,P as k}from"./router-f4766ca6.js";import{s as d}from"./request-a6986c65.js";async function N(o){return d({url:"/api/authenticate",method:"post",data:o})}function V(){return d({url:"/api/author/role/list",method:"get"})}function C(){return d({url:"/api/author",method:"get"})}const c=o=>(I("data-v-312f498b"),o=o(),k(),o),D={class:"modal",style:{display:"inline"}},M={id:"loginModal",class:"modal-dialog"},R={class:"modal-content"},A=c(()=>t("div",{class:"modal-header"},[t("h4",{class:"modal-title text-center"},"登录")],-1)),B={id:"model-body",class:"modal-body"},O=c(()=>t("label",null,"邮箱/用户名：",-1)),J={class:"form-group"},T=c(()=>t("label",null,"密码：",-1)),U={class:"form-group"},j={class:"modal-footer"},z={class:"btn-group w100"},E={class:"btn-group w100"},G={class:"btn-group w100"},H={__name:"login",setup(o){let s=v({rememberMe:!0}),h=b();async function f(){let r=await N(s.value);if(r.status===200){localStorage.setItem("jwt",r.data);let e=await C(),l=await V();localStorage.setItem("author",JSON.stringify(e.data)),localStorage.setItem("roles",JSON.stringify(l.data)),h.push({path:"/author/"+e.data.username})}}return(r,e)=>{const l=y("router-link");return w(),x("div",D,[t("div",M,[t("div",R,[A,t("div",B,[i(S(a(s).value)+" ",1),O,t("div",J,[u(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>a(s).username=n),placeholder:"邮箱/用户名",autocomplete:"off",class:"form-control"},null,512),[[p,a(s).username]])]),T,t("div",U,[u(t("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=n=>a(s).password=n),placeholder:"密码",autocomplete:"off",class:"form-control"},null,512),[[p,a(s).password]])])]),t("div",j,[t("div",z,[t("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=n=>f())},"登录")]),t("div",E,[_(l,{to:"/register",type:"button",class:"btn btn-outline-secondary"},{default:m(()=>[i("注册")]),_:1})]),t("div",G,[_(l,{to:"/",type:"button",class:"btn btn-outline-secondary"},{default:m(()=>[i("返回首页")]),_:1})])])])])])}}},$=g(H,[["__scopeId","data-v-312f498b"]]);export{$ as default};
