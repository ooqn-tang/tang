<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="net.ttcxy.tang.portal.mapper.dao.DtsDynamicDao">

    <select id="selectAuthorFansDynamic" resultType="net.ttcxy.tang.portal.entity.dto.UtsDynamicDto">
        select * from (
        <if test="type == '' or type == 'article'">
            select article_id id,title,nickname,username,'article' type, create_date,'' cover_url
            from dts_article t1, uts_author t2
            where t1.author_id = t2.author_id
            and t1.state = 1
            and t2.username = #{username}
        </if>
        <if test="type == ''">
            union
        </if>

        <if test="type == '' or type == 'video'">
            select video_id id,title ,nickname ,username,'video' type, create_date,cover_url
            from dts_video t1, uts_author t2
            where t1.author_id = t2.author_id
            and t1.state = 1
            and t2.username =  #{username}
        </if>

        ) t order by create_date desc limit 50
    </select>
</mapper>