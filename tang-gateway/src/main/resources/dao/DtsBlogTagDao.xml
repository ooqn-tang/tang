<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="net.ttcxy.tang.gateway.dao.DtsBlogTagDao">
    <resultMap id="BlogTagResult" type="net.ttcxy.tang.gateway.entity.dto.DtsBlogTagDto">
        <id column="BLOG_TAG_ID" property="blogTagId"/>
        <result column="TAG_NAME" property="tagName"/>
        <result column="synopsis" property="synopsis"/>
        <result column="CREATE_DATE" property="createDate"/>
    </resultMap>
    <select id="selectTagBlogCountListByUsername" resultMap="BlogTagResult">

    </select>
    <select id="selectTagList" resultMap="BlogTagResult">
        select * from DTS_BLOG_TAG
    </select>

    <select id="selectTagListByName" resultMap="BlogTagResult">
        select * from DTS_BLOG_TAG where TAG_NAME LIKE concat(#{name},'%')
    </select>

    <select id="selectTagByName" resultMap="BlogTagResult">
        select * from DTS_BLOG_TAG where TAG_NAME = #{name}
    </select>
    <select id="selectAuthorAllTag" resultMap="BlogTagResult">
        SELECT *
        FROM DTS_BLOG_TAG_AUTHOR_RELATION BTAR1 , DTS_BLOG_TAG BT1
        WHERE BT1.BLOG_TAG_ID = BTAR1.BLOG_TAG_ID AND AUTHOR_ID = #{authorId} ORDER BY CREATE_DATE
    </select>

    <select id="selectByBlogId" resultMap="BlogTagResult">
        select * from DTS_BLOG_TAG t1
        inner join DTS_BLOG_TAG_RELATION t2  on t1.blog_tag_id = t2.blog_tag_id and blog_id = #{blogId}
    </select>
</mapper>