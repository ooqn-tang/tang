import{_ as T,s as n,a as L,b as x}from"./index.2f223259.js";import{r as I,o as i,e as l,f as t,j as d,t as c,F as _,i as f,n as r,m as b,w as p,p as v,d as g}from"./vendor.69c4f9d0.js";const j={name:"article_info",data(){return{fans:2,loginUsername:this.$store.state.username,articleId:this.$route.params.id,loading:!0,recommendList:null,commentList:[],article:{},commentText:"",subject:[],articleList:[],showSubject:!1,collect:0,dataText:"\u52A0\u8F7D\u4E2D..."}},components:{},methods:{fansClick(s){this.fans==2?n({url:"/api/fans/"+s,method:"POST"}).then(a=>{this.fans=1}):n({url:"/api/fans/"+s,method:"DELETE"}).then(a=>{this.fans=2})},isFans(){n({url:"/api/fans/username/"+this.article.username,method:"get"}).then(s=>{s.data==1?this.fans=1:this.fans=2})},collectClick(){this.collect==1?n({url:"/api/collect/"+this.articleId,method:"DELETE"}).then(s=>{this.collect=0}):n({url:"/api/collect/"+this.articleId,method:"POST"}).then(s=>{this.collect=1})},isLike(){n({url:"/api/collect/"+this.articleId,method:"GET"}).then(s=>{this.collect=s.data})},loadArticleInfo(){n({url:"/api/article/load/"+this.articleId,method:"GET"}).then(s=>{this.article=s.data,this.$store.state.username!=""&&this.isFans(),s.data==""?this.dataText="\u6587\u7AE0\u4E0D\u5B58\u5728":this.loading=!1})},selectSubjectArticleList(){n({url:"/api/subject/article/"+this.articleId,method:"GET"}).then(s=>{this.subject=s.data,this.subject!=""&&(this.articleList=s.data.articleList,this.showSubject=!0)})},loadRecommend(){n({url:"/api/article/recommend",method:"GET"}).then(s=>{this.recommendList=s.data})},load(){this.articleId=this.$route.params.id,this.$store.state.username!=""&&this.isLike(),this.selectSubjectArticleList(),this.loadArticleInfo()}},mounted(){this.load(),this.loadRecommend()},watch:{$route:"load"}},C={class:"row"},E={class:"col-md-3 col-lg-3 d-md-inline d-none"},w={key:0,class:"list-group mb-2"},S={class:"list-group-item active"},N=t("span",{class:"float-end"},"\u4E13\u9898",-1),A={key:1,class:"card mb-2"},B={class:"card-body"},D={class:"spinner-border",role:"status"},F={class:"visually-hidden"},G={class:"list-group mb-2"},V=t("a",{class:"list-group-item active"},[d("\u63A8\u8350"),t("span",{class:"float-end"},"\u{1F387}")],-1),O=["href"],P={class:"col-md-9 col-lg-9 pb-5"},H={class:"row"},M={class:"col-lg-8 move-p-lr-0"},R={class:"card mb-2 article-body"},U={key:0,class:"card-body"},z={key:0,class:"classColor"},q=d(" . "),J={style:{color:"rgb(180, 180, 180)"}},K=["innerHTML"],Q={key:1,class:"card-body"},W={class:"col-lg-4 move-p-lr-0"},X={class:"list-group mb-2 move-b-lr-0"},Y={class:"card move-b-lr-0"},Z={class:"navbar fixed-bottom navbar-light bg-light",style:{"border-top":"1px solid rgb(206, 206, 206)"}},$={class:"container-fluid"},tt={class:"col-md-12 col-lg-12"},et=t("a",{disabled:"",class:"btn btn-outline-primary btn-sm mini-but"},"\u4E3E\u62A5",-1),st=["href"],it=d("\u4FEE\u6539"),lt=t("a",{class:"btn btn-outline-primary btn-sm mini-but",onclick:"document.body.scrollTop = document.documentElement.scrollTop = 0"},"\u2B06TOP",-1);function ot(s,a,nt,ct,e,m){const u=I("router-link"),k=L,y=x;return i(),l(_,null,[t("div",C,[t("div",E,[e.showSubject?(i(),l("div",w,[t("a",S,[d(c(e.subject.subjectName),1),N]),(i(!0),l(_,null,f(e.articleList,(o,h)=>(i(),g(u,{class:v([o.articleId==e.article.articleId?"active2":"","list-group-item"]),key:h,to:{name:"article_info",params:{id:o.articleId}}},{default:p(()=>[d(c(o.title),1)]),_:2},1032,["class","to"]))),128))])):r("",!0),e.recommendList==null?(i(),l("div",A,[t("div",B,[t("div",D,[t("span",F,c(e.dataText),1)])])])):r("",!0),t("div",G,[V,(i(!0),l(_,null,f(e.recommendList,(o,h)=>(i(),l("a",{class:"list-group-item",key:h,href:"/article/"+o.articleId},c(o.title),9,O))),128))])]),t("div",P,[t("div",H,[t("div",M,[t("div",R,[e.loading?r("",!0):(i(),l("div",U,[t("div",null,[t("strong",null,[b(u,{to:{name:"author_article",params:{username:e.article.username}}},{default:p(()=>[d(c(e.article.nickname),1)]),_:1},8,["to"])]),e.article.className!=null?(i(),l("strong",z," . "+c(e.article.className),1)):r("",!0),q,t("span",J,c(e.article.createDate),1),e.fans==2?(i(),l("button",{key:1,class:"btn btn-outline-warning float-end t-b-m-1",onClick:a[0]||(a[0]=o=>m.fansClick(e.article.username))}," \u8BA2\u9605 ")):r("",!0),e.fans==1?(i(),l("button",{key:2,class:"btn btn-outline-warning float-end t-b-m-1",onClick:a[1]||(a[1]=o=>m.fansClick(e.article.username))}," \u53D6\u6D88\u8BA2\u9605 ")):r("",!0)]),t("h3",null,[t("strong",null,c(e.article.title),1)]),t("div",{class:"markdown-body",innerHTML:e.article.text},null,8,K)])),e.loading?(i(),l("div",Q,c(e.dataText),1)):r("",!0)])]),t("div",W,[t("div",X,[b(k)]),t("div",Y,[b(y)])])])])]),t("nav",Z,[t("div",$,[t("div",tt,[t("a",{class:v([e.collect==1?"btn-outline-danger":"btn-outline-primary","btn btn-sm mini-but"]),style:{"margin-left":"0px"},onClick:a[2]||(a[2]=(...o)=>m.collectClick&&m.collectClick(...o))},"\u6536\u85CF",2),et,t("a",{class:"btn btn-outline-primary btn-sm mini-but",href:"https://ttcxy.cn/article/"+e.articleId},"\u9605\u8BFB\u6A21\u5F0F",8,st),e.article.username==e.loginUsername?(i(),g(u,{key:0,class:"btn btn-outline-primary btn-sm mini-but",to:{name:"article-editor-md",params:{id:e.articleId}}},{default:p(()=>[it]),_:1},8,["to"])):r("",!0),lt])])])],64)}var dt=T(j,[["render",ot]]);export{dt as default};
